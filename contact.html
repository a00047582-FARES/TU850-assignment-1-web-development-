<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact ‚Äî Wheels on Fire</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">

  <style>
    /* Success / Error boxes */
    .form-message {
      margin-top: 1rem;
      padding: 1rem;
      border-radius: 8px;
      font-weight: 500;
      display: none;
    }
    .form-success {
      background-color: #e6ffed;
      color: #047857;
      border: 1px solid #047857;
    }
    .form-error {
      background-color: #fee2e2;
      color: #b91c1c;
      border: 1px solid #b91c1c;
    }

    /* Inline error messages */
    .error-text {
      font-weight: 600;
      margin-top: 4px;
      display: block;
    }
    .error-text::before {
      content: "‚ö†Ô∏è ";
    }

    label {
      font-weight: 600;
      margin-top: 1rem;
      display: block;
    }

    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 6px;
      border: 1px solid #777;
    }
  </style>
</head>

<script src="script.js"></script>

<body>
  <a class="skip-link" href="#contact-main">Skip to main content</a>

  <header class="site-header" role="banner">
    <div class="container header-inner">
      <h1 class="site-title"><a href="index.html">Wheels on Fire</a></h1>
      <nav class="main-nav" role="navigation" aria-label="Main navigation">
        <ul>
          <li><a href="index.html" aria-current="page">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="events.html">Events</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="contact-main" class="container" role="main">
    <section class="contact-section" aria-labelledby="contact-heading">

      <img 
        src="images/bmw.jpg"
        alt="Close-up of a steering wheel and dashboard, sunlight through windshield"
        style="width:100%; border-radius:8px; margin-bottom:1rem;"
      >

      <h2 id="contact-heading">Contact John</h2>
      <p>
        If you have a car question, a suggestion, or a spare part he can borrow (kidding),
        drop John a message below. He promises to answer ‚Äî probably with a pun.
      </p>

      <!-- üî• Updated Form with ALL required fields -->
      <form id="contact-form" action="https://formspree.io/f/mblqllej" method="POST" novalidate>

        <label for="firstName">First Name *</label>
        <input id="firstName" name="firstName" type="text" required>
        <span class="error-text" id="err-firstName" aria-live="polite"></span>

        <label for="lastName">Last Name *</label>
        <input id="lastName" name="lastName" type="text" required>
        <span class="error-text" id="err-lastName" aria-live="polite"></span>

        <label for="email">Email Address *</label>
        <input id="email" name="email" type="email" required>
        <span class="error-text" id="err-email" aria-live="polite"></span>

        <label for="reason">Reason for Inquiry *</label>
        <select id="reason" name="reason" required>
          <option value="">-- Select a reason --</option>
          <option value="general">General</option>
          <option value="feedback">Feedback</option>
          <option value="technical">Technical Support</option>
        </select>
        <span class="error-text" id="err-reason" aria-live="polite"></span>

        <label for="message">Message *</label>
        <textarea id="message" name="message" rows="5" required></textarea>
        <span class="error-text" id="err-message" aria-live="polite"></span>

        <button type="submit">Send</button>
      </form>

      <!-- Success/Error notices -->
      <div id="success-box" class="form-message form-success">‚úÖ Your message has been sent successfully!</div>
      <div id="error-box" class="form-message form-error">‚ùå Something went wrong ‚Äî please try again.</div>


      <!-- üî• Validation + Formspree JS -->
      <script>
        const form = document.getElementById("contact-form");

        const fields = {
          firstName: "Please enter your first name.",
          lastName: "Please enter your last name.",
          email: "Please enter a valid email address.",
          reason: "Please select a reason.",
          message: "Message cannot be empty."
        };

        function validate() {
          let isValid = true;

          for (let field in fields) {
            const input = document.getElementById(field);
            const errorBox = document.getElementById("err-" + field);
            errorBox.textContent = "";

            if (!input.value.trim()) {
              errorBox.textContent = fields[field];
              isValid = false;
              continue;
            }

            if (field === "email") {
              const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
              if (!emailPattern.test(input.value.trim())) {
                errorBox.textContent = fields.email;
                isValid = false;
              }
            }
          }

          return isValid;
        }

        form.addEventListener("submit", async (e) => {
          e.preventDefault();

          document.getElementById("success-box").style.display = "none";
          document.getElementById("error-box").style.display = "none";

          if (!validate()) return;

          const data = new FormData(form);

          const response = await fetch(form.action, {
            method: form.method,
            body: data,
            headers: { "Accept": "application/json" }
          });

          if (response.ok) {
            form.reset();
            document.getElementById("success-box").style.display = "block";
          } else {
            document.getElementById("error-box").style.display = "block";
          }
        });
      </script>

    </section>
  </main>

  <footer class="site-footer" role="contentinfo">
    <div class="container">
      <p>¬© <span id="year"></span> Wheels on Fire ‚Äî John O'Reilly</p>
    </div>
  </footer>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>

</body>
</html>
